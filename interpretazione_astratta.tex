\documentclass[a4paper, 12pt, oneside,fleqn]{book}

\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc} % Consente l'uso dei caratteri accentati italiani
\usepackage{amsmath,amssymb}
\usepackage{amsthm}
\usepackage{listings}
\usepackage{stmaryrd}
\usepackage{fancyhdr}
\usepackage{cases}
\pagestyle{fancy}

\renewcommand{\sectionmark}[1]{\markboth{#1}{}}
\renewcommand{\subsectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{} % rimuove l’attuale contenuto dell’intestazione
\fancyhead[L]{\bfseries\rightmark}
\fancyhead[R]{\bfseries\leftmark}
\fancyfoot[C]{\bfseries\thepage}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}
\addtolength{\headheight}{0.5pt} % riserva spazio per la linea
\fancypagestyle{plain}{%
\fancyhead{} % ignora, nello stile plain, le intestazioni
\renewcommand{\headrulewidth}{0pt} % e la linea
}
\frenchspacing % Forza Latex ad una spaziatura uniforme, invece di lasciare più spazio alla fine

\include{macros}
\begin{document}

\title{Interpretazione astratta}
\author{
	Università degli studi di Parma \\
	Francesco Trombi \\
	Corso: Semantica dei linguaggi di programmazione \\
	Docente: Roberto Bagnara
}
\date{2014/15}
\maketitle
\tableofcontents

\newpage

\chapter{Astrazione del Linguaggio \tt{while}}

\section{Domini}

\subsection{Dominio concreto}
Prima di definire un dominio astratto per il linguaggio {\tt while}, si ricorda qual è il dominio concreto:
\begin{center}
	$ (\calP{(\Zset), \subseteq)} $
\end{center}
Questo dominio concreto è giustificato dal fatto che le variabili del linguaggio possono contenere solamente numeri interi.

\subsection{Dominio astratto degli interi}
[Inserire figura]\\
I simboli del dominio astratto sono tutti rispetto al numero $0$.

\section{Funzione di concretizzazione $\gamma$}

\subsection{Definizione di $\gamma$}
\begin{center}
	$ \gamma : A \rightarrow \calP({(\Zset), \subseteq)} $
\end{center}

Definiamola per qualche elemento del dominio astratto, mostrando in generale come definirla per tutti:
\begin{center}
	$ \gamma(\top) = \Zset $ \\
	$ \gamma(\bot) = \o $ \\
	$ \gamma(>) = \{ n \in \Zset \mid n > 0 \} $ \\
	$ \gamma(\neq) = \{ n \in \Zset \mid n \neq 0 \} $
\end{center}

\subsection{Monotonia di $\gamma$}
Argomentiamo la monotonia di $\gamma$:
\begin{center}
	$ \gamma(\bot) = \o \subseteq \gamma(a) , \forall a \in A $ \\
	$ \gamma(=) = \{0\} \subseteq \gamma(\geq) $ \\
	$ \gamma(a) \subseteq \Zset = \gamma(\top), \forall a \in A $
\end{center}

\section{Funzione di astrazione $\alpha$}

\subsection{Definizione di $\alpha$}
\begin{center}
	$ \alpha : A \rightarrow (\calP{(\Zset), \subseteq)} $
\end{center}
\begin{center}
	$ \forall S \in \calP(\Zset) : \alpha(S) = \sqcup \{ \beta(n) \mid n \in S \} $
\end{center}
Si nota che la definizione di $\alpha$ viene fatta attraverso la funzione $\beta$, definita come segue:
\begin{center}
	$ \beta: \Zset \rightarrow A  $
\end{center}

\begin{align*}
	\forall n \in \Zset: \beta(n) &=
	\begin{cases}
		>,	&\text{se $n  >  0$;} \\
		=,	&\text{se $n = 0$;} \\
		<,	&\text{se $n < 0$.}
	\end{cases} 
\end{align*}

\subsection{Monotonia di $\alpha$}
Dimostriamo la monotonia di $\alpha$.
[completare]
\begin{center}
	$ \forall S_1, S_2 \in \calP(\Zset) : S_1 \subseteq S_2 \Rightarrow \alpha(S_1) \sqsubseteq \alpha(S_2) $
\end{center}
\begin{center}
	$ S_1 \subseteq S_2 \Rightarrow \beta(S_1) \subseteq \beta(S_2) $, perché $\beta$ è  una funzione
\end{center}
\begin{center}
	$ \alpha(S_1) = \alpha(S_2) $ per proprietà del lub.
\end{center}

\subsection{Inserzione di Galois}
Siamo in un'inserzione di Galois? Il primo passo da verificare è che $\gamma \circ \alpha$ è estensiva. 

\begin{center}
	$ \forall S \in \calP(\Zset) : \gamma \circ \alpha(S) \supseteq S $
\end{center}

\begin{center}
	$ \gamma(\alpha(S)) \supseteq S $
\end{center}

\begin{center}
	$ \gamma(\sqcup \{ \beta(n) \mid n \in S \} ) \supseteq S $
\end{center}

Consideriamo $\gamma$ additiva: dovremmo prendere i vari casi e dimostrare che, ad esempio, l'unione fra $\gamma(=)$ e $\gamma(<)$ è $\gamma(\leq)$.

Questo perché l'unione è il lub di quell'insieme:

\begin{center}
	$ \union \{ \gamma(\beta(n)) \mid n \in \Zset \} \supseteq S $
\end{center}
Per dimostrarlo possiamo sfuttare il lemma:

\begin{center}
	$ \forall n \in \Zset : n \in \gamma(\beta(n)) $
\end{center}
Facendo i vari casi, questo completa la dimostrazione.

Infine, dobbiamo mostrare che $\alpha \circ \gamma$ corrisponde all'identità:
\begin{center}
	$ \alpha \circ \gamma(\bot) = \bot $
\end{center}
\begin{center}
	$ \alpha \circ \gamma(\top) = \top $
\end{center}
\begin{center}
	$ \alpha \circ \gamma(\geq) = \geq $
\end{center}

\section{Operazioni astratte}
Le operazioni astratte vanno definite seguendo le operazioni concrete; esse si applicano tra elementi del dominio astratto.

\subsection{Moltiplicazione astratta}

La moltiplicazione astratta è definita come segue:

\begin{center}
	$ \otimes = \lambda a_1,a_2 \in A . \alpha(\gamma(a_1) \boxtimes \gamma(a_2)) $
\end{center}
con $\boxtimes$ moltiplicazione concreta, definita come segue:

\begin{center}
	$ S_1 \boxtimes S_2 = \{ n_1 * n_2 \mid n_1 \in S_1, n_2 \in S_2 \} $
\end{center}

\begin{center}
	\begin{tabular}{| c | c | c | c | c | c | c | c | c | }
		\hline
		$\otimes$ & $\top$ & $\leq$ & $\neq$ & $\geq$ & $<$ & $=$ & $>$ & $\bot$ \\
		\hline
		$\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $=$ & $\top$ & $\bot$  \\
		\hline
		$\leq$ & $\top$ & $\geq$ & $\top$ & $\leq$ & $\geq$ & $=$ & $\leq$ & $\bot$\\
		\hline
		$\neq$ & $\top$ & $\top$ & $\neq$ & $\top$ & $\neq$ & $=$ & $\neq$ & $\bot$ \\
		\hline
		$\geq$ & $\top$ & $\leq$ & $\top$ & $\geq$ & $\leq$ & $=$ & $\geq$ & $\bot$ \\
		\hline
		$<$ & $\top$ & $\geq$ & $\neq$ & $\leq$ & $>$ & $=$ & $<$ & $\bot$ \\
		\hline
		$=$ & $=$ & $=$ & $=$ & $=$ & $=$ & $=$ & $=$ & $\bot$\\
		\hline
		$>$ & $\top$ & $\leq$ & $\neq$ & $\geq$ & $<$ & $=$ & $>$ & $\bot$\\
		\hline
		$\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ \\
		\hline
	\end{tabular}
\end{center}

Come si può notare, la tabella risultante è simmetrica: questo perché l'operatore di moltiplicazione astratta è commutativo.

\subsection{Somma astratta}

La somma astratta è definita come segue:

\begin{center}
	$ \oplus = \lambda a_1,a_2 \in A . \alpha(\gamma(a_1) \boxplus \gamma(a_2)) $
\end{center}
con $\boxplus$ somma concreta, definita come segue:

\begin{center}
	$ S_1 \boxplus S_2 = \{ n_1 + n_2 \mid n_1 \in S_1, n_2 \in S_2 \} $
\end{center}

\begin{center}
	\begin{tabular}{| c | c | c | c | c | c | c | c | c | }
		\hline
		$\oplus$ & $\top$ & $\leq$ & $\neq$ & $\geq$ & $<$ & $=$ & $>$ & $\bot$ \\
		\hline
		$\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\bot$ \\
		\hline
		$\leq$ & $\top$ & $\leq$ & $\top$ & $\top$ & $<$ & $\leq$ & $\top$ & $\bot$\\
		\hline
		$\neq$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\neq$ & $\top$ & $\bot$ \\
		\hline
		$\geq$ & $\top$ & $\top$ & $\top$ & $\geq$ & $\top$ & $\geq$ & $>$ & $\bot$\\
		\hline
		$<$ & $\top$ & $<$ & $\top$ & $\top$ & $<$ & $<$ & $\top$ & $\bot$\\
		\hline
		$=$ & $\top$ & $\leq$ & $\neq$ & $\geq$ & $<$ & $=$ & $>$ & $\bot$\\
		\hline
		$>$ & $\top$ & $\top$ & $\top$ & $>$ & $\top$ & $>$ & $>$ & $\bot$ \\
		\hline
		$\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ \\
		\hline
	\end{tabular}
\end{center}

Osservando il numero di ricorrenze di $\top$ all'interno della tabella e confrontandolo con quello all'interno della tabella della moltiplicazione astratta, si nota che su questo dominio la moltiplicazione astratta è più precisa della somma astratta.

\subsection{Divisione intera astratta}

La divisione intera astratta viene definita come segue:

\begin{center}
	$ \oslash = \lambda a_1,a_2 \in A . \alpha(\gamma(a_1) \boxslash \gamma(a_2)) $
\end{center}

con $\boxslash$ divisione intera concreta, definita come segue:

\begin{center}
	$ S_1 \boxslash S_2 = \{ n_1 / n_2 \mid n_1 \in S_1, n_2 \in S_2 \backslash \{0\} \} $
\end{center}
Nella seguente tabella, gli indici delle colonne indicano il dividendo e gli indici delle righe indicano il divisore.

\begin{center}
	\begin{tabular}{| c | c | c | c | c | c | c | c | c | }
		\hline
		$\oslash$ & $\top$ & $\leq$ & $\neq$ & $\geq$ & $<$ & $=$ & $>$ & $\bot$ \\
		\hline
		$\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $=$ & $\top$ & $\bot$\\
		\hline
		$\leq$ & $\top$ & $\geq$ & $\top$ & $\leq$ & $\geq$ & $=$ & $\leq$ & $\bot$\\
		\hline
		$\neq$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $=$ & $\top$ & $\bot$\\
		\hline
		$\geq$ & $\top$ & $\leq$ & $\top$ & $\geq$ & $\leq$ & $=$ & $\geq$ & $\bot$\\
		\hline
		$<$ & $\top$ & $\geq$ & $\top$ & $\leq$ & $\geq$ & $=$ & $\leq$ & $\bot$\\
		\hline
		$=$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$\\
		\hline
		$>$ & $\top$ & $\leq$ & $\top$ & $\geq$ & $\leq$ & $=$ & $\geq$ & $\bot$\\
		\hline
		$\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$\\
		\hline
	\end{tabular}
\end{center}

\subsection{Meno unario astratto}

Il meno unario astratto ($\ominus$) può essere definito per semplificare la definizione di meno binario astratto ($\ominus_b$). Infatti l'operazione astratta
\begin{center}
	$ a \ominus_b b $
\end{center}
può essere riscritta come:

\begin{center}
	$ a  \ominus_b b = a \oplus (\ominus b) $
\end{center}

\begin{center}
	\begin{tabular}{| c | c | c | c | c | c | c | c | c | }
		\hline
		$\ominus$ & $\top$ & $\leq$ & $\neq$ & $\geq$ & $<$ & $=$ & $>$ & $\bot$ \\
		\hline
		  & $\top$ & $\geq$ & $\neq$ & $\leq$ & $>$ & $=$ & $<$ & $\bot$\\
		\hline
	\end{tabular}
\end{center}

\section{Dominio astratto dei booleani}

Consideriamo ora come dominio astratto quello dei booleani.

[inserire immagine sul dominio astratto dei booleani]

\section{Operazioni astratte su booleani}

Il dominio astratto dei booleani ci permette di ragionare su altre operazioni astratte; poiché si parla di booleani le operazioni interessanti saranno quelle di confronto. 

\subsection{Uguaglianza astratta}

\begin{center}
	\begin{tabular}{| c | c | c | c | c | c | c | c | c | }
		\hline
		$=_a$ & $\top$ & $\leq$ & $\neq$ & $\geq$ & $<$ & $=$ & $>$ & $\bot$ \\
		\hline
		$\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\bot$ \\
		\hline
		$\leq$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $0$ & $\bot$\\
		\hline
		$\neq$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $0$ & $\top$ & $\bot$\\
		\hline
		$\geq$ & $\top$ & $\top$ & $\top$ & $\top$ & $0$ & $\top$ & $\top$ & $\bot$\\
		\hline
		$<$ & $\top$ & $\top$ & $\top$ & $0$ & $\top$ & $\top$ & $0$ & $\bot$\\
		\hline
		$=$ & $\top$ & $\top$ & $0$ & $\top$ & $0$ & $1$ & $0$ & $\bot$\\
		\hline
		$>$ & $\top$ & $0$ & $\top$ & $\top$ & $0$ & $\top$ & $\top$ & $\bot$\\
		\hline
		$\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$\\
		\hline
	\end{tabular}
\end{center}

Per definire l'operazione astratta di diverso basta definire quella di negato astratto:
\begin{center}
	$ c_1 \neq c_2 \iff \neg (c_2 = c_2) $
\end{center}

\begin{center}
	$ a_1 \neq _a a_2 \iff \neg _a (a_1 =_a a_2) $
\end{center}

\subsection{Disuguaglianza astratta $\preceq$}

Rappresentiamo la disuguaglianza larga astratta con il seguente simbolo: $\preceq$.

Nella seguente tabella, gli indici delle colonne indicano l'elemento a sinistra della disuguaglianza e gli indici delle righe indicano l'elemento a destra.

\begin{center}
	\begin{tabular}{| c | c | c | c | c | c | c | c | c | }
		\hline
		$\preceq$ & $\top$ & $\leq$ & $\neq$ & $\geq$ & $<$ & $=$ & $>$ & $\bot$ \\
		\hline
		$\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\bot$\\
		\hline
		$\leq$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $0$ & $\bot$\\
		\hline
		$\neq$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\top$ & $\bot$\\
		\hline
		$\geq$ & $\top$ & $1$ & $\top$ & $\top$ & $1$ & $1$ & $\top$ & $\bot$ \\
		\hline
		$<$ & $\top$ & $\top$ & $\top$ & $0$ & $\top$ & $0$ & $0$ & $\bot$\\
		\hline
		$=$ & $\top$ & $1$ & $\top$ & $\top$ & $1$ & $1$ & $0$ & $\bot$ \\
		\hline
		$>$ & $\top$ & $1$ & $\top$ & $\top$ & $1$ & $0$ & $\top$ & $\bot$ \\
		\hline
		$\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$ & $\bot$\\
		\hline
	\end{tabular}
\end{center}

\section{Semantica astratta small-step}

Diamo una semantica astratta per $\Exp$, $\Bool$ e $\Com$.

\subsection{Store astratto}
Definiamo lo store astratto $\Sigma^\#:$

\begin{center}
	$ \Sigma^\# : \Var \rightarrow A $
\end{center}

\end{document}

